<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Known Limitations - SmartMail Expense Tracker</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <nav class="navbar">
        <div class="nav-brand">
            <a href="/" style="text-decoration:none;color:inherit;">
                <span style="font-size:1.3rem;">‚Çπ</span> SmartMail Tracker
            </a>
        </div>
        <div class="nav-links">
            <a href="/dashboard" class="nav-link">Dashboard</a>
            <a href="/reports" class="nav-link">Reports</a>
            <a href="/email-settings" class="nav-link">Email</a>
            <a href="/settings" class="nav-link">Settings</a>
            <a href="/drawbacks" class="nav-link active">Limitations</a>
            <span style="color:#64748b;font-size:0.85rem;margin-left:0.5rem;">{{ username }}</span>
            <button onclick="logout()" class="btn-logout"
                style="background:none;border:1px solid rgba(255,255,255,0.08);padding:6px 14px;border-radius:8px;cursor:pointer;font-size:0.8rem;color:#64748b;">Logout</button>
        </div>
    </nav>

    <div class="container" style="max-width:960px;margin:0 auto;padding:2rem 1.5rem;">
        <div style="margin-bottom:2rem;">
            <h1 style="font-size:1.75rem;font-weight:700;color:#f1f5f9;">‚ö†Ô∏è Known Limitations & Drawbacks</h1>
            <p style="font-size:0.88rem;color:#64748b;margin-top:4px;">
                Transparency is important. Below are all known limitations of SmartMail Expense Tracker with their
                workarounds and future plans.
            </p>
        </div>

        <!-- Quick Stats Banner -->
        <div class="drawback-stats"
            style="display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem;">
            <div class="card" style="text-align:center;background:linear-gradient(135deg,#fef3c7,#fffbeb);">
                <div style="font-size:2rem;font-weight:800;color:#b45309;">12</div>
                <div style="font-size:0.75rem;color:#92400e;font-weight:500;">Known Limitations</div>
            </div>
            <div class="card" style="text-align:center;background:linear-gradient(135deg,#d1fae5,#ecfdf5);">
                <div style="font-size:2rem;font-weight:800;color:#065f46;">12</div>
                <div style="font-size:0.75rem;color:#047857;font-weight:500;">Workarounds Provided</div>
            </div>
            <div class="card" style="text-align:center;background:linear-gradient(135deg,#dbeafe,#eff6ff);">
                <div style="font-size:2rem;font-weight:800;color:#1e40af;">8</div>
                <div style="font-size:0.75rem;color:#1d4ed8;font-weight:500;">On Future Roadmap</div>
            </div>
        </div>

        <!-- Drawbacks List -->
        <div class="drawbacks-list" style="display:flex;flex-direction:column;gap:1.25rem;">

            <!-- 1. API & Integration Limitations -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-high">HIGH</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">1. API & Integration
                            Limitations</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>The app uses IMAP to read your emails ‚Äî it can only read email content, not interact with
                            payment gateways, bank APIs, or UPI systems directly. This means we rely entirely on what's
                            written in the email text.</p>
                    </div>
                    <div class="drawback-section">
                        <h4>Impact</h4>
                        <ul>
                            <li>Expenses paid in cash or via methods not emailed will be missed</li>
                            <li>Some email providers may rate-limit or block IMAP access</li>
                            <li>Emails with heavy HTML/images may not parse correctly</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Use the <strong>Add Expense</strong> button on the Dashboard for cash/offline payments
                            </li>
                            <li>Enable Google "App Passwords" for Gmail ‚Äî regular passwords don't work</li>
                            <li>Check Email Settings page if sync stops working</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 2. False Positives & Negatives -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-high">HIGH</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">2. False Positives & False
                            Negatives</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>The email parser uses keyword-matching and regex to identify expenses. This can sometimes
                            create expenses from non-purchase emails (false positives) or miss legitimate expenses
                            (false negatives).</p>
                    </div>
                    <div class="drawback-section">
                        <h4>Impact</h4>
                        <ul>
                            <li>Promotional emails mentioning prices may be wrongly recorded (mitigated by spam
                                filtering)</li>
                            <li>Emails from new/unknown merchants may be missed</li>
                            <li>Amounts may be extracted incorrectly from complex email layouts</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Check the <strong>confidence score</strong> badge on each transaction ‚Äî low scores
                                indicate potential false positives</li>
                            <li>Delete incorrect entries via the üóëÔ∏è button</li>
                            <li>Use <strong>Report</strong> button (üö©) to flag false positives</li>
                            <li>Manually add missed expenses</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 3. Currency & Formatting -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-medium">MED</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">3. Currency Implementation
                            Gaps</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>The app defaults to Indian Rupee (‚Çπ) and Indian numbering. Multi-currency support is limited
                            ‚Äî all amounts are stored in INR. Foreign currency transactions from emails will be converted
                            approximately or may show incorrect amounts.</p>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>For foreign currency purchases, manually add the INR equivalent</li>
                            <li>Check bank statements for accurate converted amounts</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 4. UX Gaps -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-medium">MED</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">4. User Experience Gaps</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>Current Limitations</h4>
                        <ul>
                            <li>No mobile app ‚Äî web-only (responsive design works on mobile browsers)</li>
                            <li>No push notifications for new expenses</li>
                            <li>No budget alerts or spending limits</li>
                            <li>No receipt image upload/OCR</li>
                            <li>No dark mode toggle</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Add the web app to your phone's home screen for app-like experience</li>
                            <li>Check the dashboard regularly ‚Äî it auto-refreshes every 2 minutes</li>
                            <li>Export CSV for budget tracking in spreadsheets</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 5. Scalability -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-low">LOW</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">5. Scalability Concerns</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>Uses SQLite (file-based database) and runs as a single-threaded Flask server. This works well
                            for personal use but won't handle thousands of concurrent users without migration to
                            PostgreSQL and a production server.</p>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>For personal use (1-5 users), the current setup is perfectly adequate</li>
                            <li>Regular CSV exports serve as backups</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 6. Data Extraction Accuracy -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-high">HIGH</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">6. Data Extraction Accuracy
                        </h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>Amount, merchant, and category extraction relies on regex patterns. Different email formats
                            from the same merchant can produce inconsistent results. GST extraction may not catch all
                            tax breakdowns.</p>
                    </div>
                    <div class="drawback-section">
                        <h4>Expected vs Actual</h4>
                        <ul>
                            <li><strong>Expected:</strong> Extract exact amount from every receipt email</li>
                            <li><strong>Actual:</strong> ~85% accuracy for known merchants, ~60% for unknown formats
                            </li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Review transactions weekly and correct any mismatched amounts</li>
                            <li>Use the confidence score as a guide ‚Äî low confidence = review needed</li>
                            <li>Edit expense details by clicking on a transaction</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 7. Missing Financial Features -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-medium">MED</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">7. Missing Financial Features
                        </h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>Not Included</h4>
                        <ul>
                            <li>No income tracking (expense-only)</li>
                            <li>No budget planning or spending goals</li>
                            <li>No recurring expense detection</li>
                            <li>No bill reminders or due date alerts</li>
                            <li>No tax report generation (ITR compatible)</li>
                            <li>No multi-account management (single user per login)</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Export data to Excel/Sheets for comprehensive budgeting</li>
                            <li>Use category breakdown to identify recurring patterns</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 8. Indian Market Complexities -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-medium">MED</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">8. Indian Market Complexities
                        </h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>India has thousands of local merchants, regional languages in emails, and diverse payment
                            systems. The app recognizes ~60 popular merchants but cannot cover the entire Indian market.
                        </p>
                    </div>
                    <div class="drawback-section">
                        <h4>Impact</h4>
                        <ul>
                            <li>Regional/local merchant emails may categorize as "Other"</li>
                            <li>Emails in Hindi, Tamil, or other regional languages may not parse</li>
                            <li>lesser-known UPI apps may not be detected</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Edit category for local merchant expenses manually</li>
                            <li>Add frequently used local merchants as manual entries</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 9. Privacy & Security -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-high">HIGH</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">9. Privacy & Security
                            Considerations</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>Current Security Model</h4>
                        <ul>
                            <li>Email app passwords are stored in SQLite (not encrypted at rest)</li>
                            <li>User passwords are hashed with SHA-256 + salt (not bcrypt/argon2)</li>
                            <li>No two-factor authentication</li>
                            <li>Session-based auth without CSRF tokens</li>
                            <li>IMAP connections use SSL/TLS (secure in transit)</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Use <strong>app-specific passwords</strong> (not your main password) for email</li>
                            <li>Run the app on localhost only (don't expose to the internet)</li>
                            <li>Regularly rotate your email app passwords</li>
                            <li>Use strong, unique passwords for your tracker account</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 10. Compliance -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-low">LOW</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">10. Compliance & Regulatory
                        </h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>This is a personal expense tracking tool and is NOT a certified financial application. It
                            should not be used for tax filing, audit trails, or regulatory compliance.</p>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Use exported data as a reference, not as official financial records</li>
                            <li>Always cross-reference with bank statements before filing taxes</li>
                            <li>Consult a CA/tax professional for ITR</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 11. Business Sustainability -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-low">LOW</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">11. Business Sustainability
                        </h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>What This Means</h4>
                        <p>This is a free, self-hosted application. There is no commercial support, SLA, or guaranteed
                            uptime. Updates and bug fixes depend on community/developer availability.</p>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>Regularly export your data as CSV backups</li>
                            <li>The app runs entirely on your machine ‚Äî your data is never lost if you keep backups</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 12. Technical Debt -->
            <div class="drawback-card">
                <div class="drawback-header" onclick="toggleDrawback(this)">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span class="drawback-severity severity-low">LOW</span>
                        <h3 style="margin:0;font-size:1rem;font-weight:600;color:#f1f5f9;">12. Technical Debt</h3>
                    </div>
                    <span class="drawback-toggle">‚ñº</span>
                </div>
                <div class="drawback-body">
                    <div class="drawback-section">
                        <h4>Current Technical Choices</h4>
                        <ul>
                            <li>Monolithic Flask app (no microservices separation)</li>
                            <li>SQLite for all storage (suitable for personal use only)</li>
                            <li>No automated test suite</li>
                            <li>Inline CSS and JavaScript (not modular)</li>
                            <li>No CI/CD pipeline</li>
                        </ul>
                    </div>
                    <div class="workaround-box">
                        <h4>üîß Workaround</h4>
                        <ul>
                            <li>For personal use, these do not affect functionality</li>
                            <li>The application is intentionally kept simple for easy deployment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Future Roadmap -->
        <div class="card" style="margin-top:2rem;">
            <div class="card-header" style="font-size:1.1rem;">üó∫Ô∏è Future Roadmap</div>
            <div
                style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;padding:0.5rem 0;">
                <div class="roadmap-item">
                    <span class="roadmap-status planned">Planned</span>
                    <span>Budget Alerts & Limits</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status planned">Planned</span>
                    <span>Recurring Expense Detection</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status planned">Planned</span>
                    <span>Dark Mode</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status planned">Planned</span>
                    <span>Receipt Image Upload</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status research">Research</span>
                    <span>Multi-currency Support</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status research">Research</span>
                    <span>Regional Language Support</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status research">Research</span>
                    <span>Mobile App (PWA)</span>
                </div>
                <div class="roadmap-item">
                    <span class="roadmap-status research">Research</span>
                    <span>Income Tracking</span>
                </div>
            </div>
        </div>

        <!-- Feedback Section -->
        <div class="card" style="margin-top:1.5rem;">
            <div class="card-header">üìù Report an Issue</div>
            <p style="font-size:0.82rem;color:#64748b;margin-bottom:1rem;">Found a bug or have a suggestion? Let us
                know below.</p>
            <div style="display:flex;flex-direction:column;gap:0.75rem;">
                <select id="feedbackType" class="form-control" style="width:100%;max-width:300px;">
                    <option value="general">General Feedback</option>
                    <option value="false_positive">False Positive (wrong expense detected)</option>
                    <option value="wrong_category">Wrong Category</option>
                    <option value="missing_expense">Missing Expense</option>
                    <option value="bug">Bug Report</option>
                    <option value="feature">Feature Request</option>
                </select>
                <textarea id="feedbackMessage" class="form-control"
                    style="width:100%;min-height:80px;resize:vertical;font-family:inherit;"
                    placeholder="Describe the issue or suggestion..."></textarea>
                <button class="btn btn-primary" onclick="submitFeedback()" style="align-self:flex-start;">Submit
                    Feedback</button>
                <div id="feedbackStatus" style="display:none;font-size:0.82rem;padding:8px 12px;border-radius:8px;">
                </div>
            </div>
        </div>

        <!-- Disclaimer -->
        <div style="margin-top:2rem;padding:1.25rem;background:#fef3c7;border:1px solid #fcd34d;border-radius:12px;">
            <p style="margin:0;font-size:0.82rem;color:#92400e;line-height:1.6;">
                <strong>‚ö†Ô∏è Disclaimer:</strong> SmartMail Expense Tracker is a personal finance tool designed for
                tracking convenience. It is <strong>not</strong> a certified financial product. All data should be
                cross-verified with official bank statements and receipts. The accuracy of automated email parsing
                varies and is not guaranteed. Export data regularly as backups.
            </p>
        </div>
    </div>

    <script>
        function toggleDrawback(header) {
            const card = header.closest('.drawback-card');
            card.classList.toggle('open');
        }

        // Open first two drawbacks by default
        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.drawback-card');
            if (cards.length > 0) cards[0].classList.add('open');
            if (cards.length > 1) cards[1].classList.add('open');
        });

        async function submitFeedback() {
            const type = document.getElementById('feedbackType').value;
            const message = document.getElementById('feedbackMessage').value.trim();
            const statusEl = document.getElementById('feedbackStatus');

            if (!message) {
                statusEl.style.display = 'block';
                statusEl.style.background = '#fee2e2';
                statusEl.style.color = '#991b1b';
                statusEl.textContent = 'Please enter a message.';
                return;
            }

            try {
                const res = await fetch('/api/feedback', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ type, message })
                });
                const data = await res.json();

                statusEl.style.display = 'block';
                if (data.success) {
                    statusEl.style.background = '#d1fae5';
                    statusEl.style.color = '#065f46';
                    statusEl.textContent = '‚úÖ ' + data.message;
                    document.getElementById('feedbackMessage').value = '';
                } else {
                    statusEl.style.background = '#fee2e2';
                    statusEl.style.color = '#991b1b';
                    statusEl.textContent = '‚ùå ' + (data.error || 'Failed to submit');
                }
            } catch (e) {
                statusEl.style.display = 'block';
                statusEl.style.background = '#fee2e2';
                statusEl.style.color = '#991b1b';
                statusEl.textContent = '‚ùå Network error. Please try again.';
            }

            setTimeout(() => { statusEl.style.display = 'none'; }, 5000);
        }

        async function logout() {
            await fetch('/api/logout', { method: 'POST' });
            window.location.href = '/login';
        }
    </script>
</body>

</html>